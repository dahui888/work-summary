#### 第八章，通用程序设计
>本章主要讨论Java语言的具体细节，讨论局部变量的处理、循环控制结构以及各种数据类型的使用技巧。

##### 第一条：将局部变量的作用域最小化
本条目跟「使类和类成员的可访问性最小化」的本质上是类似的。将局部变量的作用域最小化，可以增强代码的可读性和可维护性，并降低出错的可能性。

使局部变量作用域最小化最有效的方法就是第一次使用它的地方进行声明。如果变量在使用之前进行声明，只会造成混乱。过早地声明局部变量会使它的作用域过早扩展，而且结束过晚。所以局部变量要在用到的时候进行声明，也便于声明周期的控制。

##### 第二条：for-each循环优先于传统的for循环
for-each和for循环的做法都比while循环更好。但是由于for循环中需要创建一个临时变量，所以出错的可能性会稍大，宗旨是越简单越好，出错的可能性也低。

##### 第三条：如果需要精确计算，变使用float和double
主要是float和double在java程序中设计的不是精确的，比如
```java
System.out.print(1.03-0.42);
```
返回的是0.6100000000000001。所以为了解决这个问题可以进行转换成整形或者使用BigDecimal进行计算。

##### 第四条：基本类型优先于装箱基本类型
Java的类型系统由两部分组成，基本类型和引用类型，基本类型如int、double等，引用类型如String和List等。每个基本类型都有一个对应的引用类型，称作装箱基本类型，比如int对应的Integer、double对应Double。

在JDK1.5中新增了自动装箱和自动拆箱，主要的区别有：
- 基本类型只有值，装箱基本类型具有不同的统一性。
- 基本类型只有功能完备的值，而装箱基本类型除了对应的基本类型值外还有非功能值null。
- 基本类型比装箱类型更节省时间和空间。

##### 第五条：如果有其他类型更适合，尽量避免使用字符串
字符串用来表示文本性能不错，但是针对值类型的数据，则应该被转换为对应的值类型。
- 字符串不适合代替枚举类型
- 字符串不适合代替值类型
- 字符串不适合代替聚集类型

##### 第六条：当心字符串连接的性能
字符串连接操作符是把多个字符串合并为一个字符串，可以达到单独一行的输出效果，或者构造一个字符串来表示较小的、大小固定的对象，使用连接操作符是非常适合的，但是它不适合运用在大规模的场景中。为连接n个字符串而重复地使用字符串连接操作符，需要n的平方级时间。

一般建议使用StringBuilder来代替String，在JDK1.5中增加了非同步的StringBuilder类代替过时的StringBuffer类。

##### 第七条：通过接口引用对象
使用接口而不是类作为参数的类型，一般要优先使用接口而不是类来引用对象。如果有合适的接口类型存在，对于参数、返回值、变量和域来说，就应该使用接口类型进行声明。
```java
List<String> list = new ArrayList<String>();
```

##### 第八条：谨慎地使用本地Native方法
从历史角度来看，本地方法的主要三种用途：
- “访问特定平台的机制”，比如访问Windows下的注册表。
- 访问遗留代码的能力；
- 针对注重性能的部分，提高系统性能。

随着JVM的不断优化，现在性能已经非常好了。